{"dependencies":[{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/extends","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"./Blob","data":{"isAsync":false}},{"name":"./BlobRegistry","data":{"isAsync":false}},{"name":"../BatchedBridge/NativeModules","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var _defineProperty = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/defineProperty\");\n\n  var _extends = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/extends\");\n\n  var _classCallCheck = _$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/classCallCheck\");\n\n  var _createClass = _$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/createClass\");\n\n  function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\n  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n  var Blob = _$$_REQUIRE(_dependencyMap[4], \"./Blob\");\n\n  var BlobRegistry = _$$_REQUIRE(_dependencyMap[5], \"./BlobRegistry\");\n\n  var _require = _$$_REQUIRE(_dependencyMap[6], \"../BatchedBridge/NativeModules\"),\n      BlobModule = _require.BlobModule;\n\n  function uuidv4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      var r = Math.random() * 16 | 0,\n          v = c == 'x' ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  }\n\n  function createBlobCollector(blobId) {\n    if (global.__blobCollectorProvider == null) {\n      return null;\n    } else {\n      return global.__blobCollectorProvider(blobId);\n    }\n  }\n\n  var BlobManager = function () {\n    function BlobManager() {\n      _classCallCheck(this, BlobManager);\n    }\n\n    _createClass(BlobManager, null, [{\n      key: \"createFromParts\",\n      value: function createFromParts(parts, options) {\n        var blobId = uuidv4();\n        var items = parts.map(function (part) {\n          if (part instanceof ArrayBuffer || global.ArrayBufferView && part instanceof global.ArrayBufferView) {\n            throw new Error(\"Creating blobs from 'ArrayBuffer' and 'ArrayBufferView' are not supported\");\n          }\n\n          if (part instanceof Blob) {\n            return {\n              data: part.data,\n              type: 'blob'\n            };\n          } else {\n            return {\n              data: String(part),\n              type: 'string'\n            };\n          }\n        });\n        var size = items.reduce(function (acc, curr) {\n          if (curr.type === 'string') {\n            return acc + global.unescape(encodeURI(curr.data)).length;\n          } else {\n            return acc + curr.data.size;\n          }\n        }, 0);\n        BlobModule.createFromParts(items, blobId);\n        return BlobManager.createFromOptions({\n          blobId: blobId,\n          offset: 0,\n          size: size,\n          type: options ? options.type : '',\n          lastModified: options ? options.lastModified : Date.now()\n        });\n      }\n    }, {\n      key: \"createFromOptions\",\n      value: function createFromOptions(options) {\n        BlobRegistry.register(options.blobId);\n        return _extends(Object.create(Blob.prototype), {\n          data: options.__collector == null ? _objectSpread({}, options, {\n            __collector: createBlobCollector(options.blobId)\n          }) : options\n        });\n      }\n    }, {\n      key: \"release\",\n      value: function release(blobId) {\n        BlobRegistry.unregister(blobId);\n\n        if (BlobRegistry.has(blobId)) {\n          return;\n        }\n\n        BlobModule.release(blobId);\n      }\n    }, {\n      key: \"addNetworkingHandler\",\n      value: function addNetworkingHandler() {\n        BlobModule.addNetworkingHandler();\n      }\n    }, {\n      key: \"addWebSocketHandler\",\n      value: function addWebSocketHandler(socketId) {\n        BlobModule.addWebSocketHandler(socketId);\n      }\n    }, {\n      key: \"removeWebSocketHandler\",\n      value: function removeWebSocketHandler(socketId) {\n        BlobModule.removeWebSocketHandler(socketId);\n      }\n    }, {\n      key: \"sendOverSocket\",\n      value: function sendOverSocket(blob, socketId) {\n        BlobModule.sendOverSocket(blob.data, socketId);\n      }\n    }]);\n\n    return BlobManager;\n  }();\n\n  BlobManager.isAvailable = !!BlobModule;\n  module.exports = BlobManager;\n});","map":[[2,0,11,0],[16,0,13,0],[16,6,13,6,"Blob"],[16,10,13,10],[16,13,13,13,"require"],[16,24,13,20],[16,53,13,0],[18,0,14,0],[18,6,14,6,"BlobRegistry"],[18,18,14,18],[18,21,14,21,"require"],[18,32,14,28],[18,69,14,0],[20,17,15,21,"require"],[20,28,15,28],[20,81],[21,6,15,7,"BlobModule"],[21,16],[21,28,15,7,"BlobModule"],[21,38],[23,0,26,0],[23,11,26,9,"uuidv4"],[23,17,26,0],[23,20,26,26],[24,0,27,2],[24,11,27,9],[24,50,27,48,"replace"],[24,57,27,9],[24,58,27,56],[24,65,27,9],[24,67,27,65],[24,77,27,65,"c"],[24,78,27,66],[24,80,27,70],[25,0,28,4],[25,10,28,10,"r"],[25,11,28,11],[25,14,28,15,"Math"],[25,18,28,19],[25,19,28,20,"random"],[25,25,28,15],[25,30,28,31],[25,32,28,14],[25,35,28,37],[25,36,28,4],[26,0,28,4],[26,10,29,6,"v"],[26,11,29,7],[26,14,29,10,"c"],[26,15,29,11],[26,19,29,15],[26,22,29,10],[26,25,29,21,"r"],[26,26,29,10],[26,29,29,26,"r"],[26,30,29,27],[26,33,29,30],[26,36,29,25],[26,39,29,37],[26,42,28,4],[27,0,30,4],[27,13,30,11,"v"],[27,14,30,12],[27,15,30,13,"toString"],[27,23,30,11],[27,24,30,22],[27,26,30,11],[27,27,30,4],[28,0,31,3],[28,5,27,9],[28,6,27,2],[29,0,32,1],[31,0,41,0],[31,11,41,9,"createBlobCollector"],[31,30,41,0],[31,31,41,29,"blobId"],[31,37,41,0],[31,39,41,67],[32,0,42,2],[32,8,42,6,"global"],[32,14,42,12],[32,15,42,13,"__blobCollectorProvider"],[32,38,42,6],[32,42,42,40],[32,46,42,2],[32,48,42,46],[33,0,43,4],[33,13,43,11],[33,17,43,4],[34,0,44,3],[34,5,42,2],[34,11,44,9],[35,0,45,4],[35,13,45,11,"global"],[35,19,45,17],[35,20,45,18,"__blobCollectorProvider"],[35,43,45,11],[35,44,45,42,"blobId"],[35,50,45,11],[35,51,45,4],[36,0,46,3],[37,0,47,1],[39,6,52,6,"BlobManager"],[39,17],[46,38,62,4,"parts"],[46,43],[46,45,63,4,"options"],[46,52],[46,54,64,10],[47,0,65,4],[47,12,65,10,"blobId"],[47,18,65,16],[47,21,65,19,"uuidv4"],[47,27,65,25],[47,29,65,4],[48,0,66,4],[48,12,66,10,"items"],[48,17,66,15],[48,20,66,18,"parts"],[48,25,66,23],[48,26,66,24,"map"],[48,29,66,18],[48,30,66,28],[48,40,66,28,"part"],[48,44,66,32],[48,46,66,36],[49,0,67,6],[49,14,68,8,"part"],[49,18,68,12],[49,30,68,24,"ArrayBuffer"],[49,41,68,8],[49,45,69,9,"global"],[49,51,69,15],[49,52,69,16,"ArrayBufferView"],[49,67,69,9],[49,71,69,35,"part"],[49,75,69,39],[49,87,69,51,"global"],[49,93,69,57],[49,94,69,58,"ArrayBufferView"],[49,109,67,6],[49,111,70,8],[50,0,71,8],[50,18,71,14],[50,22,71,18,"Error"],[50,27,71,14],[50,28,72,10],[50,103,71,14],[50,104,71,8],[51,0,74,7],[53,0,75,6],[53,14,75,10,"part"],[53,18,75,14],[53,30,75,26,"Blob"],[53,34,75,6],[53,36,75,32],[54,0,76,8],[54,19,76,15],[55,0,77,10,"data"],[55,14,77,10,"data"],[55,18,77,14],[55,20,77,16,"part"],[55,24,77,20],[55,25,77,21,"data"],[55,29,76,15],[56,0,78,10,"type"],[56,14,78,10,"type"],[56,18,78,14],[56,20,78,16],[57,0,76,15],[57,13,76,8],[58,0,80,7],[58,11,75,6],[58,17,80,13],[59,0,81,8],[59,19,81,15],[60,0,82,10,"data"],[60,14,82,10,"data"],[60,18,82,14],[60,20,82,16,"String"],[60,26,82,22],[60,27,82,23,"part"],[60,31,82,22],[60,32,81,15],[61,0,83,10,"type"],[61,14,83,10,"type"],[61,18,83,14],[61,20,83,16],[62,0,81,15],[62,13,81,8],[63,0,85,7],[64,0,86,5],[64,9,66,18],[64,10,66,4],[65,0,87,4],[65,12,87,10,"size"],[65,16,87,14],[65,19,87,17,"items"],[65,24,87,22],[65,25,87,23,"reduce"],[65,31,87,17],[65,32,87,30],[65,42,87,31,"acc"],[65,45,87,30],[65,47,87,36,"curr"],[65,51,87,30],[65,53,87,45],[66,0,88,6],[66,14,88,10,"curr"],[66,18,88,14],[66,19,88,15,"type"],[66,23,88,10],[66,28,88,24],[66,36,88,6],[66,38,88,34],[67,0,89,8],[67,19,89,15,"acc"],[67,22,89,18],[67,25,89,21,"global"],[67,31,89,27],[67,32,89,28,"unescape"],[67,40,89,21],[67,41,89,37,"encodeURI"],[67,50,89,46],[67,51,89,47,"curr"],[67,55,89,51],[67,56,89,52,"data"],[67,60,89,46],[67,61,89,21],[67,63,89,59,"length"],[67,69,89,8],[68,0,90,7],[68,11,88,6],[68,17,90,13],[69,0,91,8],[69,19,91,15,"acc"],[69,22,91,18],[69,25,91,21,"curr"],[69,29,91,25],[69,30,91,26,"data"],[69,34,91,21],[69,35,91,31,"size"],[69,39,91,8],[70,0,92,7],[71,0,93,5],[71,9,87,17],[71,11,93,7],[71,12,87,17],[71,13,87,4],[72,0,95,4,"BlobModule"],[72,8,95,4,"BlobModule"],[72,18,95,14],[72,19,95,15,"createFromParts"],[72,34,95,4],[72,35,95,31,"items"],[72,40,95,4],[72,42,95,38,"blobId"],[72,48,95,4],[73,0,97,4],[73,15,97,11,"BlobManager"],[73,26,97,22],[73,27,97,23,"createFromOptions"],[73,44,97,11],[73,45,97,41],[74,0,98,6,"blobId"],[74,10,98,6,"blobId"],[74,16,98,12],[74,18,98,6,"blobId"],[74,24,97,41],[75,0,99,6,"offset"],[75,10,99,6,"offset"],[75,16,99,12],[75,18,99,14],[75,19,97,41],[76,0,100,6,"size"],[76,10,100,6,"size"],[76,14,100,10],[76,16,100,6,"size"],[76,20,97,41],[77,0,101,6,"type"],[77,10,101,6,"type"],[77,14,101,10],[77,16,101,12,"options"],[77,23,101,19],[77,26,101,22,"options"],[77,33,101,29],[77,34,101,30,"type"],[77,38,101,19],[77,41,101,37],[77,43,97,41],[78,0,102,6,"lastModified"],[78,10,102,6,"lastModified"],[78,22,102,18],[78,24,102,20,"options"],[78,31,102,27],[78,34,102,30,"options"],[78,41,102,37],[78,42,102,38,"lastModified"],[78,54,102,27],[78,57,102,53,"Date"],[78,61,102,57],[78,62,102,58,"now"],[78,65,102,53],[79,0,97,41],[79,9,97,11],[79,10,97,4],[80,0,104,3],[83,40,110,27,"options"],[83,47],[83,49,110,52],[84,0,111,4,"BlobRegistry"],[84,8,111,4,"BlobRegistry"],[84,20,111,16],[84,21,111,17,"register"],[84,29,111,4],[84,30,111,26,"options"],[84,37,111,33],[84,38,111,34,"blobId"],[84,44,111,4],[85,0,112,4],[85,15,112,11],[85,24,112,25,"Object"],[85,30,112,31],[85,31,112,32,"create"],[85,37,112,25],[85,38,112,39,"Blob"],[85,42,112,43],[85,43,112,44,"prototype"],[85,52,112,25],[85,53,112,11],[85,55,112,56],[86,0,113,6,"data"],[86,10,113,6,"data"],[86,14,113,10],[86,16,117,8,"options"],[86,23,117,15],[86,24,117,16,"__collector"],[86,35,117,8],[86,39,117,31],[86,43,117,8],[86,64,119,17,"options"],[86,71,117,8],[87,0,120,14,"__collector"],[87,12,120,14,"__collector"],[87,23,120,25],[87,25,120,27,"createBlobCollector"],[87,44,120,46],[87,45,120,47,"options"],[87,52,120,54],[87,53,120,55,"blobId"],[87,59,120,46],[88,0,117,8],[88,15,122,12,"options"],[89,0,112,56],[89,9,112,11],[89,10,112,4],[90,0,124,3],[93,30,129,17,"blobId"],[93,36],[93,38,129,39],[94,0,130,4,"BlobRegistry"],[94,8,130,4,"BlobRegistry"],[94,20,130,16],[94,21,130,17,"unregister"],[94,31,130,4],[94,32,130,28,"blobId"],[94,38,130,4],[96,0,131,4],[96,12,131,8,"BlobRegistry"],[96,24,131,20],[96,25,131,21,"has"],[96,28,131,8],[96,29,131,25,"blobId"],[96,35,131,8],[96,36,131,4],[96,38,131,34],[97,0,132,6],[98,0,133,5],[100,0,134,4,"BlobModule"],[100,8,134,4,"BlobModule"],[100,18,134,14],[100,19,134,15,"release"],[100,26,134,4],[100,27,134,23,"blobId"],[100,33,134,4],[101,0,135,3],[104,45,141,38],[105,0,142,4,"BlobModule"],[105,8,142,4,"BlobModule"],[105,18,142,14],[105,19,142,15,"addNetworkingHandler"],[105,39,142,4],[106,0,143,3],[109,42,149,29,"socketId"],[109,50],[109,52,149,53],[110,0,150,4,"BlobModule"],[110,8,150,4,"BlobModule"],[110,18,150,14],[110,19,150,15,"addWebSocketHandler"],[110,38,150,4],[110,39,150,35,"socketId"],[110,47,150,4],[111,0,151,3],[114,45,157,32,"socketId"],[114,53],[114,55,157,56],[115,0,158,4,"BlobModule"],[115,8,158,4,"BlobModule"],[115,18,158,14],[115,19,158,15,"removeWebSocketHandler"],[115,41,158,4],[115,42,158,38,"socketId"],[115,50,158,4],[116,0,159,3],[119,37,164,24,"blob"],[119,41],[119,43,164,36,"socketId"],[119,51],[119,53,164,60],[120,0,165,4,"BlobModule"],[120,8,165,4,"BlobModule"],[120,18,165,14],[120,19,165,15,"sendOverSocket"],[120,33,165,4],[120,34,165,30,"blob"],[120,38,165,34],[120,39,165,35,"data"],[120,43,165,4],[120,45,165,41,"socketId"],[120,53,165,4],[121,0,166,3],[127,0,52,6,"BlobManager"],[127,2,52,6,"BlobManager"],[127,13],[127,14,56,9,"isAvailable"],[127,25],[127,28,56,23],[127,29,56,24],[127,30,56,25,"BlobModule"],[127,40],[128,0,169,0,"module"],[128,2,169,0,"module"],[128,8,169,6],[128,9,169,7,"exports"],[128,16,169,0],[128,19,169,17,"BlobManager"],[128,30,169,0]]},"type":"js/module"}]}